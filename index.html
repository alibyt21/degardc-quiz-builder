<!DOCTYPE html>
<html lang="en" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Document</title>
    <style>
        .dg-next-question-button,
        .dg-prev-question-button {
            user-select: none;
        }

        .option {
            user-select: none;
            display: flex;
            flex-direction: row;
            align-items: center;
            border: 1px solid #cccccc;
            padding: 15px;
            width: 100%;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s all;
        }

        .option:hover {
            background-color: #efefef;
        }

        .bullet {
            transition: 0.3s all;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 20px;
            height: 20px;
            border: 1px solid #cccccc;
            border-radius: 100%;
            margin-left: 10px;
            background-color: #ffffff;
            padding: 2px;
        }

        .selected {
            transition: 0.3s all;
            background-color: rgb(209, 234, 255) !important;
            border: 1px solid rgb(90, 150, 255);
        }

        .selected .bullet {
            background-color: rgb(90, 150, 255);
            color: white !important;
        }

        .bullet .check {
            display: none;
        }

        .selected .bullet .check {
            display: block;
        }
    </style>
</head>

<body>
    <div
        class="dg-main-container overflow-hidden relative flex flex-col justify-center items-center px-2 bg-blue-950 w-full h-screen">
        <div class="bg-white absolute top-4 left-2 h-2 right-2 w-auto rounded-xl my-2">
            <div class="absolute right-0 dg-progress-bar bg-blue-500 h-2 rounded-xl transition-all duration-700 ease-in-out"
                style="width: 0%;"></div>
        </div>
        <div class="dg-question-card bg-white absolute top-12 left-2 right-2 rounded-xl w-auto h-[90vh] z-[1] shadow-lg transition-all duration-700 ease-in-out flex items-center"
            style="opacity: 100%;">
            <div
                class="dg-question-block max-h-[600px] overflow-auto p-5 md:p-7 lg:p-10 w-full overflow-y-visible rounded-xl">
                <div class="text-gray-400">
                    بهترین پاسخ را انتخاب کنید
                </div>
                <div class="question text-2xl my-5 mb-7">
                    دلیل مهاجرت پنگوئن‌ها چیست؟
                </div>
                <div class="option-block w-full grid grid-cols-1 gap-3 lg:gap-5 lg:grid-cols-2" data-qtype="multi-option"
                    data-qnumber="0">
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                </div>
            </div>

            <div class="flex justify-between p-5 bg-white md:p-7 lg:p-10 rounded-b-xl absolute bottom-0 w-full">
                <button
                    class="hover:bg-[#efefef] transition-all duration-300 ease-in-out dg-prev-question-button border border-solid border-gray-300 cursor-pointer w-full rounded-xl p-3 last:mr-5">
                    قبلی
                </button>
                <button
                    class="dg-next-question-button bg-blue-500 hover:bg-blue-600 transition-all duration-300 ease-in-out cursor-pointer w-full rounded-xl p-3 last:mr-5 text-white">
                    بعدی
                </button>
            </div>
        </div>
        <div class="dg-question-card bg-white absolute top-12 left-2 right-2 rounded-xl w-auto h-[90vh] shadow-lg transition-all duration-700 ease-in-out flex items-center"
            style="opacity: 50%;transform: matrix(0.95, 0, 0 , 0.95 , 0 , 28);">
            <div
                class="dg-question-block max-h-[600px] overflow-auto p-5 md:p-7 lg:p-10 w-full overflow-y-visible rounded-xl">
                <div class="text-gray-400">
                    بهترین پاسخ را انتخاب کنید
                </div>
                <div class="question text-2xl my-5 mb-7">
                    دلیل مهاجرت پنگوئن‌ها چیست؟
                </div>
                <div class="option-block w-full grid grid-cols-1 gap-3 lg:gap-5 lg:grid-cols-2" data-qtype="multi-option"
                    data-qnumber="1">
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                </div>
            </div>

            <div class="flex justify-between p-5 bg-white md:p-7 lg:p-10 rounded-b-xl absolute bottom-0 w-full">
                <button
                    class="hover:bg-[#efefef] transition-all duration-300 ease-in-out dg-prev-question-button border border-solid border-gray-300 cursor-pointer w-full rounded-xl p-3 last:mr-5">
                    قبلی
                </button>
                <button
                    class="dg-next-question-button bg-blue-500 hover:bg-blue-600 transition-all duration-300 ease-in-out cursor-pointer w-full rounded-xl p-3 last:mr-5 text-white">
                    بعدی
                </button>
            </div>
        </div>
        <div class="dg-question-card bg-white absolute top-12 left-2 right-2 rounded-xl w-auto h-[90vh] shadow-lg transition-all duration-700 ease-in-out flex items-center"
            style="opacity: 25%;transform: matrix(0.90, 0, 0 , 0.90 , 0 , 52);">
            <div
                class="dg-question-block max-h-[600px] overflow-auto p-5 md:p-7 lg:p-10 w-full overflow-y-visible rounded-xl">
                <div class="text-gray-400">
                    بهترین پاسخ را انتخاب کنید
                </div>
                <div class="question text-2xl my-5 mb-7">
                    دلیل مهاجرت پنگوئن‌ها چیست؟
                </div>
                <div class="option-block w-full grid grid-cols-1 gap-3 lg:gap-5 lg:grid-cols-2" data-qtype="single-option"
                    data-qnumber="2">
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                    <div class="option">
                        <div class="bullet">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="w-4 h-4 check">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                        </div>
                        <span>خوردن غذای بیشتر</span>
                    </div>
                </div>
            </div>

            <div class="flex justify-between p-5 bg-white md:p-7 lg:p-10 rounded-b-xl absolute bottom-0 w-full">
                <button
                    class="hover:bg-[#efefef] transition-all duration-300 ease-in-out dg-prev-question-button border border-solid border-gray-300 cursor-pointer w-full rounded-xl p-3 last:mr-5">
                    قبلی
                </button>
                <button
                    class="dg-next-question-button bg-blue-500 hover:bg-blue-600 transition-all duration-300 ease-in-out cursor-pointer w-full rounded-xl p-3 last:mr-5 text-white">
                    بعدی
                </button>
            </div>
        </div>
    </div>


    <script>
        const QUESTION_TYPES = {
            type1: "single-option",
            type2: "multi-option"
        }





        let currentIndex = 0;
        let animationDuration = 500;


        let nextQuestionButton = document.querySelectorAll(".dg-next-question-button");
        let prevQuestionButton = document.querySelectorAll(".dg-prev-question-button");
        let questionCards = document.querySelectorAll(".dg-question-card");

        let progressBar = document.querySelector(".dg-progress-bar");

        let allOptions = document.querySelectorAll(".option");
        allOptions.forEach(function (singleAnswer) {
            singleAnswer.addEventListener("click", handle_click_on_answer);
        })

        nextQuestionButton.forEach(function (singleNextButton, index) {
            singleNextButton.addEventListener("click", function () {
                go_to_next_question_animations(index)
            })
        })

        prevQuestionButton.forEach(function (singleNextButton, index) {
            singleNextButton.addEventListener("click", function () {
                back_to_prev_question_animations(index)
            })
        })

        function handle_click_on_answer(e) {
            let qType = e.target.parentNode.dataset.qtype || e.target.parentNode.parentNode.dataset.qtype
            let qNumber = e.target.parentNode.dataset.qnumber || e.target.parentNode.parentNode.dataset.qnumber
            let optionBlock = e.target.parentNode.dataset.qtype ? e.target.parentNode : (e.target.parentNode.parentNode.dataset.qtype ? e.target.parentNode.parentNode : null)
            let chosenAnswer = e.target.parentNode.dataset.qtype ? e.target : (e.target.parentNode.parentNode.dataset.qtype ? e.target.parentNode : null)
            let chosenIndex;
            for (let index = 0; index < optionBlock.children.length; index++) {
                if (optionBlock.children[index] == chosenAnswer) {
                    chosenIndex = index;
                }
            }

            if (qType == QUESTION_TYPES.type1) {
                for (let index = 0; index < optionBlock.children.length; index++) {
                    if (index == chosenIndex) {
                        answersData[qNumber].option[index].isChosen = !(answersData[qNumber].option[index].isChosen);
                    } else {
                        answersData[qNumber].option[index].isChosen = false;
                    }
                }
            } else if (qType == QUESTION_TYPES.type2) {
                answersData[qNumber].option[chosenIndex].isChosen = !(answersData[qNumber].option[chosenIndex].isChosen);
            }


            for (let index = 0; index < optionBlock.children.length; index++) {
                if (answersData[qNumber].option[index].isChosen) {
                    answersData[qNumber].isAnswered = true;
                }
            }

            sync_data_to_view();
        }


        function sync_data_to_view(){
            let optionBlocks = document.querySelectorAll(".option-block");
            optionBlocks.forEach(function (singleOptionBlock,outerIndex) {
                for (let index = 0; index < singleOptionBlock.children.length; index++) {
                    if(answersData[outerIndex].option[index].isChosen){
                        singleOptionBlock.children[index].classList.add("selected");
                    }else{
                        singleOptionBlock.children[index].classList.remove("selected")
                    }
                }
            })
        }

        let answersData = [];

        function init_answers_data() {
            let optionBlocks = document.querySelectorAll(".option-block");
            optionBlocks.forEach(function (singleQuestion) {
                let option = [];
                for (let index = 0; index < singleQuestion.children.length; index++) {
                    option.push({ isChosen: false })
                }
                answersData.push({
                    isAnswered: false,
                    option
                })
            })
        }

        init_answers_data();

        function go_to_next_question_animations(index) {
            if (!(questionCards[+(index + 1)])) {
                return;
            }
            currentIndex = currentIndex + 1;
            console.log(currentIndex);
            progressBar.style.width = ((currentIndex / (questionCards.length)) * 100) + "%";
            // current question animation
            questionCards[index].style.transform = "matrix(1.2, 0, 0 , 1.2 , 0 , 100)";
            questionCards[index].style.opacity = "0%";
            setTimeout(function () {
                questionCards[index].style.visibility = "hidden";
                questionCards[index].style.zIndex = "0";
            }, animationDuration);


            // next question animation
            questionCards[+(index + 1)].style.transform = "matrix(1, 0, 0 , 1 , 0 , 0)";
            questionCards[+(index + 1)].style.opacity = "100%";
            questionCards[+(index + 1)].style.zIndex = '1';

            // 2 next question animation
            questionCards[+(index + 2)].style.transform = "matrix(0.95, 0, 0 , 0.95 , 0 , 28)";
            questionCards[+(index + 2)].style.opacity = "50%";

            // 3 next question animation
            questionCards[+(index + 3)].style.transform = "matrix(0.90, 0, 0 , 0.90 , 0 , 52)";
            questionCards[+(index + 3)].style.opacity = "25%";
        }


        function back_to_prev_question_animations(index) {
            if (!(questionCards[+(index - 1)])) {
                return;
            }
            currentIndex = currentIndex - 1;
            progressBar.style.width = ((currentIndex / (questionCards.length)) * 100) + "%";
            // current question animation
            questionCards[index].style.transform = "matrix(0.95, 0, 0 , 0.95 , 0 , 28)";
            questionCards[index].style.opacity = "50%";
            questionCards[index].style.zIndex = "0";

            // prev question animation
            questionCards[+(index - 1)].style.transform = "matrix(1, 0, 0 , 1 , 0 , 0)";
            questionCards[+(index - 1)].style.visibility = "visible";
            questionCards[+(index - 1)].style.opacity = "100%";
            questionCards[+(index - 1)].style.zIndex = "1";

            // next question animation
            questionCards[+(index + 1)].style.transform = "matrix(0.9, 0, 0 , 0.9 , 0 , 52)";
            questionCards[+(index + 1)].style.opacity = "25%";

            // 2 next question animation
            questionCards[+(index + 2)].style.transform = "matrix(0.9, 0, 0 , 0.9 , 0 , 52)";
            questionCards[+(index + 2)].style.opacity = "0%";

        }


    </script>



</body>

</html>